<?xml version="1.0" encoding="UTF-8"?>

<?import com.comp2042.GameOverPanel?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.Group?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>
<?import java.net.URL?>
<?import javafx.scene.shape.Rectangle?>

<Pane fx:controller="com.comp2042.GuiController"
      xmlns:fx="http://javafx.com/fxml"
      stylesheets="@window_style.css"
      prefWidth="800" prefHeight="700">

    <!-- Background Overlay -->
    <Rectangle width="${scene.width}" height="${scene.height}" fill="rgba(0,0,0,0.7)"/>

    <!-- Main Game Container -->
    <VBox alignment="CENTER" spacing="30" layoutX="50" layoutY="20">

        <!-- Header -->
        <Text text="TETRIS JFX" styleClass="gameTitle"/>

        <HBox spacing="40" alignment="CENTER">

            <!-- Left Side - Next Brick & Controls -->
            <VBox spacing="20" alignment="CENTER" prefWidth="150">
                <!-- Next Brick Preview -->
                <VBox styleClass="nextBrick" spacing="8" alignment="CENTER"
                      prefWidth="120" prefHeight="140">
                    <Label text="NEXT BRICK" styleClass="nextBrickLabel"/>
                    <GridPane fx:id="brickPanel" vgap="2" hgap="2" alignment="CENTER"/>
                </VBox>

                <!-- Controls Info -->
                <VBox styleClass="helpInfo" spacing="8" alignment="CENTER_LEFT" prefWidth="140">
                    <Label text="ðŸŽ® CONTROLS"/>
                    <Label text="â† â†’ : Move Left/Right"/>
                    <Label text="â†‘ : Rotate"/>
                    <Label text="â†“ : Soft Drop"/>
                    <Label text="SPACE : Hard Drop"/>
                    <Label text="R : Restart"/>
                </VBox>
            </VBox>

            <!-- Center - Game Board -->
            <VBox spacing="15" alignment="CENTER">
                <BorderPane styleClass="gameBoard" fx:id="gameBoard" prefWidth="240" prefHeight="480">
                    <center>
                        <GridPane fx:id="gamePanel" hgap="1" vgap="1"/>
                    </center>
                </BorderPane>
            </VBox>

            <!-- Right Side - Score Panel -->
            <VBox styleClass="scorePanel" spacing="12" prefWidth="180" alignment="CENTER">
                <Label text="ðŸŽ¯ SCORE STATS" styleClass="scoreLabel"/>

                <VBox spacing="8" alignment="CENTER_LEFT">
                    <Label text="SCORE" styleClass="scoreLabel"/>
                    <Label fx:id="scoreLabel" text="0" styleClass="scoreValue"/>

                    <Label text="LINES CLEARED" styleClass="scoreLabel"/>
                    <Label fx:id="linesLabel" text="0" styleClass="scoreValue"/>

                    <Label text="LEVEL" styleClass="scoreLabel"/>
                    <Label fx:id="levelLabel" text="1" styleClass="scoreValue"/>

                    <Label text="ðŸ† HIGH SCORE" styleClass="scoreLabel"/>
                    <Label fx:id="highScoreLabel" text="0" styleClass="scoreValue"/>
                </VBox>

                <!-- Game Info -->
                <VBox spacing="5" style="-fx-padding: 15 0 0 0;" alignment="CENTER">
                    <Label text="ðŸ”¥ CURRENT LEVEL" styleClass="scoreLabel"/>
                    <Label fx:id="currentLevelLabel" text="1" styleClass="scoreValue"/>
                </VBox>
            </VBox>
        </HBox>
    </VBox>

    <!-- Game Over & Notifications -->
    <Group fx:id="groupNotification" layoutX="250" layoutY="250">
        <VBox alignment="CENTER" spacing="20">
            <GameOverPanel fx:id="gameOverPanel" styleClass="gameOverPanel"/>
        </VBox>
    </Group>

    <!-- Level Up Notification Area -->
    <VBox fx:id="notificationArea" layoutX="300" layoutY="150" spacing="10" alignment="CENTER"/>
</Pane>